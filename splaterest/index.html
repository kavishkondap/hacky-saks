<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://quadjr.github.io/aframe-gaussian-splatting/index.js"></script>
  </head>
  <body>
    <a-scene renderer="antialias: false" stats>
      <a-entity position="0 1.6 -2.0" animation="property: rotation; to: 0 360 0; dur: 10000; easing: linear; loop: true">
        <a-sphere position="0 0 0.5" radius="0.5" color="#FFFFFF"></a-sphere>
        <a-sphere position="0 0 -0.5" radius="0.5" color="#EF2D5E"></a-sphere>

        <a-entity meta-touch-controls="hand: left" thumbstick-logging></a-entity>
        <a-entity meta-touch-controls="hand: right" thumbstick-logging></a-entity>
      </a-entity>
      <a-entity id="splat-viewer" gaussian_splatting="src: https://huggingface.co/cakewalk/splat-data/resolve/main/train.splat;" rotation="0 0 0" position="0 1.5 -2"></a-entity>
    </a-scene>
  </body>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const splat = document.getElementById('splat-viewer');
    if (urlParams.has('src')) {
        const sourceID = urlParams.get('src');
        splat.setAttribute('gaussian_splatting', "src: https://calhacks-hacky-saks.s3.us-east-2.amazonaws.com/" + sourceID + ";");
    }

    AFRAME.regi
    const SOUND = new Audio('./public/oh-my-god-meme.mp3');

    // Wait for A-Frame scene to load
    const scene = document.querySelector('hand: left');
    scene.addEventListener('triggerdown', function (evt) {
      console.log('LEFT HAND CLICKED!');
      const sound = new Audio('./public/oh-my-god-meme.mp3');
      sound.play();
      // Create a new aquare entity
      const newEntity = document.createElement('a-box');
      newEntity.setAttribute('position', '0 1.5 -2');
      newEntity.setAttribute('rotation', '0 45 0');
      newEntity.setAttribute('color', '#4CC3D9');
      // Add the new entity to the scene
      document.querySelector('a-scene').appendChild(newEntity);
    });
    const scene2 = document.querySelector('hand: right');
    scene2.addEventListener('triggerdown', function (evt) {
      console.log('RIGHT HAND CLICKED!');
      const sound = new Audio('./public/oh-my-god-meme.mp3');
      sound.play();
      // Create a new aquare entity
      const newEntity = document.createElement('a-box');
      newEntity.setAttribute('position', '0 1.5 -2');
      newEntity.setAttribute('rotation', '0 45 0');
      newEntity.setAttribute('color', '#4CC3D9');
      // Add the new entity to the scene
      document.querySelector('a-scene').appendChild(newEntity);

    });

    AFRAME.registerComponent('thumbstick-logging',{
      init: function () {
        this.el.addEventListener('thumbstickmoved', this.logThumbstick);
      },
      logThumbstick: function (evt) {
        SOUND.play();
      }
    });

    
  </script>
</html>